<p align="right">
    <a href="./mode.md">English</a>| <b>中文</b>
</p>

# dejaOS 系统模式介绍

## 概述

dejaOS 系统提供了四种运行模式，每种模式下系统的行为各有不同，且模式之间可以切换：

- 安全模式 (safe)
- 开发模式 (dev)
- 生产模式 (prod)
- 测试模式 (test)

## 1. 安全模式

安全模式类似于 PC 电脑的 BIOS 模式。设备启动时有一个 2 秒的延时窗口，此时可以通过串口线连接 PC 端工具来进入安全模式。安全模式的主要功能是：

- **安装 DPK 应用**：这是安全模式最重要的作用。
- **切换系统模式**：可以使用工具将设备切换为其它模式。
- **获取系统信息**：可以查看系统及系统内已安装应用的基本信息。

![应用安装](image/app_install2.png)

## 2. 开发模式

开发模式是开发设备的默认模式。在开发模式下：

- **默认不启动任何应用**：设备重启后不会自动启动任何 App。
- **无界面显示**：如果设备带有屏幕，则不显示应用相关界面。
- **调试 App**：系统会自动启动一个内置的调试 App，用于通过 USB 线与 VSCode 交互。此模式适用于将开发中的 JavaScript 代码同步到设备中。

在安全模式下可以使用工具手动切换至开发模式。

## 3. 生产模式

生产模式是生产设备的默认模式。在生产模式下：

- **启动生产 App**：设备重启后会自动启动对应的生产 App。
- **应用界面显示**：如果设备带有屏幕，则会显示应用相关的界面。
- **禁止调试**：调试 App 不会启动，也无法通过 VSCode 同步代码至设备。

可以在安全模式下通过工具切换至生产模式。

## 4. 测试模式

在测试模式下，生产 App 和调试 App 同时运行，通常用于特殊测试需求。在此模式下：

- **启动生产 App**：设备重启后会自动启动对应的生产 App，且显示应用界面（若设备带有屏幕）。
- **启动调试 App**：设备启动后会自动启动调试 App，从而可以通过 VSCode 同步代码至设备。

可以在安全模式下通过工具手动切换至测试模式。

## 通过代码切换模式

除了使用工具切换模式外，还可以通过代码触发模式切换，例如通过设备扫描二维码或使用其他协议。可以使用 `dxCommon` 模块的 `setMode` 函数进行切换：

```javascript
import common from '../dxmodules/dxCommon.js';

common.setMode("dev"); // 支持的参数包括：dev, test, prod, safe
```